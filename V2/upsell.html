<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proceso de Compra</title>
  <link rel="stylesheet" href="./style.css">
  <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
</head>
<body>
  <div class="container">
    <!-- Preload View -->
    <div id="preload-view" class="preload-modal">
      <div class="preload-overlay"></div>
      <div class="preload-content">
        <button class="close-modal">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        <div class="preload-gradient">
          <div class="preload-inner">
            <div class="lottie-container">
              <!-- Placeholder for Lottie animation -->
              <div class="loading-animation">
                <dotlottie-player src="https://lottie.host/84388e2b-9e1a-42e9-be44-f90259c09166/DPL1V7YELp.lottie" background="transparent" speed="0.5" style="width: 300px; height: 300px" loop autoplay></dotlottie-player>
              </div>
              <div class="loading-animation-2">
                <dotlottie-player src="https://lottie.host/f9f5e32e-7f59-43fe-89f3-a2f5a2ae4d5a/7INZiquJIe.lottie" background="transparent" speed="0.5" style="width: 500px; height: 300px" loop autoplay></dotlottie-player>
              </div>
            </div>
            <div class="preload-text">
              <h1>Congratulations, you won!</h1>
              <span class="bg-green-100 text-green-600 text-xs-3 px-2 py-1 rounded-full font-medium">
                40% OFF
              </span>
              <p>You have been selected for an exclusive special offer</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Upsell View -->
    <div id="upsell-view" class="hidden">
      <!-- Order Summary -->
      <div class="order-summary">
        <div class="summary-header">
          <h2>Resumen de compra</h2>
          <span class="status-badge">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.29 7 12 12 20.71 7"></polyline><line x1="12" y1="22" x2="12" y2="12"></line></svg>
            Tu orden ya fue realizada y llegará muy pronto
          </span>
        </div>
        
        <div class="summary-content">
          <div class="summary-products">
            <div class="product-stack">
              <img src="https://images.unsplash.com/photo-1556229010-6c3f2c9ca5f8?w=800&auto=format&fit=crop&q=80" alt="Producto Principal">
              <img src="https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=800&auto=format&fit=crop&q=80" alt="Bump Offer">
            <div class="summary-details">
              <p class="summary-title">Tu orden actual</p>
              <p class="summary-subtitle">2 productos - $129.98</p>
              </div>
              <div class="summary-details-2">
              <span class="shipping-badge">Envío Gratis</span>
              <div class="flex items-center gap-1 text-green-600">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/>
                  <line x1="7" y1="7" x2="7.01" y2="7"/>
                </svg>
                <span class="font-medium">AHORRO TOTAL $50.00</span>
              </div>
            </div>
          </div>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Upsell Content -->
      <div class="upsell-section">
        <!-- Winner Tag -->
        <div class="winner-tag">
          <div class="winner-icon">
            <dotlottie-player src="https://lottie.host/84388e2b-9e1a-42e9-be44-f90259c09166/DPL1V7YELp.lottie" background="transparent" speed="0.5" style="width: 300px; height: 300px" loop autoplay></dotlottie-player>
          </div>
          <span>¡Felicitaciones fuiste el ganador de estas ofertas!</span>
        </div>

        <!-- Product Card -->
        <div class="product-card">
          <!-- Product Gallery -->
          <div class="product-gallery">
            <div class="main-image">
              <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&auto=format&fit=crop&q=80" alt="Audífonos Premium">
              <button class="gallery-nav prev">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
              </button>
              <button class="gallery-nav next">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
              </button>
              <div class="gallery-dots">
                <button class="dot active"></button>
                <button class="dot"></button>
                <button class="dot"></button>
              </div>
            </div>
            <div class="thumbnail-strip">
              <button class="thumbnail active">
                <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&auto=format&fit=crop&q=80" alt="Thumbnail 1">
              </button>
              <button class="thumbnail">
                <img src="https://images.unsplash.com/photo-1484704849700-f032a568e944?w=800&auto=format&fit=crop&q=80" alt="Thumbnail 2">
              </button>
              <button class="thumbnail">
                <img src="https://images.unsplash.com/photo-1583394838336-acd977736f90?w=800&auto=format&fit=crop&q=80" alt="Thumbnail 3">
              </button>
            </div>
          </div>

          <!-- Product Info -->
          <div class="product-info">
            <h3>Audífonos Premium</h3>
            <p class="product-description">
              Experimenta la música como nunca antes con nuestros audífonos premium. 
              Diseñados para ofrecer un sonido excepcional y máxima comodidad.
            </p>

            <div class="product-pricing">
              <span class="current-price">$49.99</span>
              <span class="original-price">$89.99</span>
              <span class="discount-badge">-44%</span>
            </div>

            <div class="product-rating">
              <div class="stars">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
              </div>
              <span class="review-count">(2,945)</span>
            </div>

            <div class="product-features">
              <p class="features-title">Características principales:</p>
              <ul>
                <li>
                  <span class="feature-dot"></span>
                  Sonido cristalino de alta fidelidad
                </li>
                <li>
                  <span class="feature-dot"></span>
                  Cancelación activa de ruido
                </li>
                <li>
                  <span class="feature-dot"></span>
                  Batería de larga duración (hasta 30h)
                </li>
              </ul>
            </div>

            <div class="product-guarantees">
              <div class="guarantee-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                <span>Garantía de 1 año</span>
              </div>
              <div class="guarantee-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                <span>30 días de prueba</span>
              </div>
              <div class="guarantee-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
                <span>Envío express</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="btn-accept" onclick="showDownsell()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
            ¡Sí! Agregar a mi orden
          </button>
          <button class="btn-reject" onclick="showDownsell()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            No, gracias
          </button>
        </div>
      </div>
    </div>

    <!-- Downsell View -->
    <div id="downsell-view" class="hidden">
      <!-- Compact Order Summary -->
      <div class="compact-summary">
        <div class="summary-products">
          <div class="product-stack">
            <img src="https://images.unsplash.com/photo-1556229010-6c3f2c9ca5f8?w=800&auto=format&fit=crop&q=80" alt="Producto Principal">
            <img src="https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=800&auto=format&fit=crop&q=80" alt="Bump Offer">
          </div>
          <div class="summary-details">
            <p class="summary-title">Tu orden actual</p>
            <div class="savings-info">
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>
              <span>Ahorras $50.00</span>
            </div>
          </div>
          <div class="summary-total">
            <p class="total-price">$129.98</p>
            <span class="shipping-badge">Envío Gratis</span>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Downsell Content -->
      <div class="downsell-section">
        <!-- Last Chance Tag -->
        <div class="last-chance-tag">
          <div class="last-chance-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 12v10H4V12M2 7l10 7 10-7M12 22V7"/></svg>
          </div>
          <span>¡Última oportunidad! Oferta especial desbloqueada</span>
        </div>

        <!-- Product Card -->
        <div class="product-card">
          <!-- Product Gallery -->
          <div class="product-gallery">
            <div class="main-image">
              <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&auto=format&fit=crop&q=80" alt="Audífonos Premium">
              <button class="gallery-nav prev">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
              </button>
              <button class="gallery-nav next">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
              </button>
              <div class="gallery-dots">
                <button class="dot active"></button>
                <button class="dot"></button>
                <button class="dot"></button>
              </div>
            </div>
            <div class="thumbnail-strip">
              <button class="thumbnail active">
                <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&auto=format&fit=crop&q=80" alt="Thumbnail 1">
              </button>
              <button class="thumbnail">
                <img src="https://images.unsplash.com/photo-1484704849700-f032a568e944?w=800&auto=format&fit=crop&q=80" alt="Thumbnail 2">
              </button>
              <button class="thumbnail">
                <img src="https://images.unsplash.com/photo-1583394838336-acd977736f90?w=800&auto=format&fit=crop&q=80" alt="Thumbnail 3">
              </button>
            </div>
          </div>

          <!-- Product Info -->
          <div class="product-info">
            <div class="product-header">
              <h3>Audífonos Premium</h3>
              <span class="super-discount">-55% OFF</span>
            </div>
            <p class="product-description">
              ¡No dejes pasar esta oferta irrepetible! Los mismos audífonos premium ahora con un 
              SUPER DESCUENTO ADICIONAL del 55%. Esta oferta expira en breve y no volverá a repetirse.
            </p>

            <div class="downsell-pricing">
              <div class="price-item">
                <span class="price-label">Precio original:</span>
                <span class="price-value line-through">$89.99</span>
              </div>
              <div class="price-item">
                <span class="price-label">Precio anterior:</span>
                <span class="price-value line-through">$49.99</span>
              </div>
              <div class="final-price">
                <span class="price-label">Precio final:</span>
                <span class="price-value">$39.99</span>
                <span class="savings">¡Ahorras $50!</span>
              </div>
            </div>

            <div class="product-features">
              <p class="features-title">Características principales:</p>
              <ul>
                <li>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                  ✨ Exactamente el mismo producto premium
                </li>
                <li>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                  🎯 Mismo sonido cristalino de alta fidelidad
                </li>
                <li>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                  🔋 Misma batería de larga duración (30h)
                </li>
              </ul>
            </div>

            <div class="product-guarantees">
              <div class="guarantee-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                <span>Garantía de 1 año</span>
              </div>
              <div class="guarantee-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                <span>30 días de prueba</span>
              </div>
              <div class="guarantee-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
                <span>Envío express</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="btn-special" onclick="showThankYou()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
            ¡SÍ! Quiero aprovechar este descuento especial
          </button>
          <button class="btn-plain" onclick="showThankYou()">
            No, prefiero pagar el precio completo
          </button>
        </div>
      </div>
    </div>

    <!-- Thank You View -->
    <div id="thank-you-view" class="hidden">
      <div class="thank-you-header">
        <h1>¡Gracias por tu compra!</h1>
        <p>Tu pedido está siendo procesado</p>
      </div>

      <div class="thank-you-content">
        <div class="shipping-status">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
          Envío gratis - Entrega estimada: 3-5 días hábiles
        </div>

        <div class="order-items">
          <div class="order-item">
            <img src="https://images.unsplash.com/photo-1556229010-6c3f2c9ca5f8?w=800&auto=format&fit=crop&q=80" alt="Producto Principal">
            <div class="item-details">
              <p class="item-name">Producto Principal</p>
              <p class="item-quantity">Cantidad: 1</p>
            </div>
            <p class="item-price">$99.99</p>
          </div>

          <div class="order-item">
            <img src="https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=800&auto=format&fit=crop&q=80" alt="Bump Offer">
            <div class="item-details">
              <p class="item-name">Bump Offer</p>
              <p class="item-quantity">Cantidad: 1</p>
            </div>
            <p class="item-price">$29.99</p>
          </div>

          <div class="order-item">
            <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&auto=format&fit=crop&q=80" alt="Audífonos Premium">
            <div class="item-details">
              <p class="item-name">Audífonos Premium</p>
              <p class="item-quantity">Cantidad: 1</p>
            </div>
            <p class="item-price">$39.99</p>
          </div>

          <div class="order-total">
            <div class="total-info">
              <p class="total-label">Total Final</p>
              <div class="total-details">
                <span class="shipping-note">Envío Gratis</span>
                <div class="savings-total">
                  <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>
                  <span>Ahorro total: $50.00</span>
                </div>
              </div>
            </div>
            <p class="final-total">$169.97</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
  // View Management
const views = {
  upsell: document.getElementById('upsell-view'),
  downsell: document.getElementById('downsell-view'),
  thankYou: document.getElementById('thank-you-view')
};

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  const preloadModal = document.getElementById('preload-view');
  const closeButton = document.querySelector('.close-modal');
  const preloadOverlay = document.querySelector('.preload-overlay');

  // Función para cerrar el modal
  function closeModal() {
    preloadModal.style.opacity = '0';
    setTimeout(() => {
      preloadModal.style.display = 'none';
      // Mostrar la vista de upsell
      document.getElementById('upsell-view').classList.remove('hidden');
    }, 300);
  }

  // Cerrar automáticamente después de 6 segundos
  setTimeout(closeModal, 6000);

  // Cerrar al hacer clic en el botón X
  closeButton.addEventListener('click', (e) => {
    e.stopPropagation();
    closeModal();
  });

  // Cerrar al hacer clic fuera del modal
  preloadOverlay.addEventListener('click', (e) => {
    if (e.target === preloadOverlay) {
      closeModal();
    }
  });

  // Mostrar upsell inmediatamente
  views.upsell.classList.remove('hidden');
  
  // Setup gallery navigation
  setupGallery();
});

function showDownsell() {
  views.upsell.classList.add('hidden');
  views.downsell.classList.remove('hidden');
  views.thankYou.classList.add('hidden');
  window.scrollTo(0, 0);
}

function showThankYou() {
  views.upsell.classList.add('hidden');
  views.downsell.classList.add('hidden');
  views.thankYou.classList.remove('hidden');
  window.scrollTo(0, 0);
}

// Gallery Management
function setupGallery() {
  const galleries = document.querySelectorAll('.product-gallery');
  
  galleries.forEach(gallery => {
    const mainImage = gallery.querySelector('.main-image img');
    const thumbnails = gallery.querySelectorAll('.thumbnail');
    const dots = gallery.querySelectorAll('.dot');
    const prevBtn = gallery.querySelector('.prev');
    const nextBtn = gallery.querySelector('.next');
    
    let currentIndex = 0;
    const images = Array.from(thumbnails).map(thumb => thumb.querySelector('img').src);
    
    function updateGallery() {
      mainImage.src = images[currentIndex];
      
      // Update thumbnails
      thumbnails.forEach((thumb, idx) => {
        if (idx === currentIndex) {
          thumb.classList.add('active');
        } else {
          thumb.classList.remove('active');
        }
      });
      
      // Update dots
      dots.forEach((dot, idx) => {
        if (idx === currentIndex) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    }
    
    // Thumbnail clicks
    thumbnails.forEach((thumb, idx) => {
      thumb.addEventListener('click', () => {
        currentIndex = idx;
        updateGallery();
      });
    });
    
    // Dot clicks
    dots.forEach((dot, idx) => {
      dot.addEventListener('click', () => {
        currentIndex = idx;
        updateGallery();
      });
    });
    
    // Previous button
    prevBtn.addEventListener('click', () => {
      currentIndex = currentIndex > 0 ? currentIndex - 1 : images.length - 1;
      updateGallery();
    });
    
    // Next button
    nextBtn.addEventListener('click', () => {
      currentIndex = currentIndex < images.length - 1 ? currentIndex + 1 : 0;
      updateGallery();
    });
  });
}


</script>
</body>
</html>